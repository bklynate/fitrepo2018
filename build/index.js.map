{"version":3,"sources":["../index.js"],"names":["process","env","PORT","MONGODB_URI","NODE_ENV","app","mongoUrl","require","use","urlencoded","extended","json","maxAge","keys","cookieKey","initialize","session","Promise","global","connect","static","get","request","response","sendFile","resolve","__dirname","listen","console","log"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEwCA,QAAQC,G;IAAxCC,I,gBAAAA,I;IAAMC,W,gBAAAA,W;IAAaC,Q,gBAAAA,Q;;;AAE3B,IAAMC,MAAM,wBAAZ;;AAEA,IAAMC,WAAWH,eAAe,iCAAhC;;AAEAI,QAAQ,eAAR;AACAA,QAAQ,qBAAR;;AAEAF,IAAIG,GAAJ,CAAQ,qBAAWC,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;AACAL,IAAIG,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;AACAN,IAAIG,GAAJ,CAAQ,6BAAc;AACpBI,UAAQ,KAAK,EAAL,GAAU,EAAV,GAAe,EAAf,GAAoB,IADR;AAEpBC,QAAM,CAAC,eAAKC,SAAN;AAFc,CAAd,CAAR;AAIAT,IAAIG,GAAJ,CAAQ,mBAASO,UAAT,EAAR;AACAV,IAAIG,GAAJ,CAAQ,mBAASQ,OAAT,EAAR;;AAEA,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;AACA,mBAASE,OAAT,CAAiBb,QAAjB;;AAEA,0BAAWD,GAAX;AACA,2BAAYA,GAAZ;;AAEA,IAAID,aAAa,YAAjB,EAA+B;AAC7B;AACAC,MAAIG,GAAJ,CAAQ,kBAAQY,MAAR,CAAe,cAAf,CAAR;;AAEA;AACA;AACA;AACAf,MAAIgB,GAAJ,CAAQ,GAAR,EAAa,UAACC,OAAD,EAAUC,QAAV,EAAuB;AAClCA,aAASC,QAAT,CAAkB,eAAKC,OAAL,CAAaC,SAAb,EAAwB,QAAxB,EAAkC,OAAlC,EAA2C,YAA3C,CAAlB;AACD,GAFD;AAGD;;AAEDrB,IAAIsB,MAAJ,CAAYzB,QAAQ,IAApB,EAA2B,YAAM;AAC/B0B,UAAQC,GAAR,CAAY,2CAAZ,EAD+B,CAC2B;AAC3D,CAFD","file":"index.js","sourcesContent":["import path from 'path';\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport mongoose from 'mongoose';\nimport cookieSession from 'cookie-session';\nimport passport from 'passport';\nimport keys from './config/keys';\nimport authRoutes from './routes/authRoutes';\nimport macroRoutes from './routes/macroRoutes';\n\nconst { PORT, MONGODB_URI, NODE_ENV } = process.env;\n\nconst app = express();\n\nconst mongoUrl = MONGODB_URI || 'mongodb://localhost/macrofit_db';\n\nrequire('./models/User');\nrequire('./services/passport');\n\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use(cookieSession({\n  maxAge: 30 * 24 * 60 * 60 * 1000,\n  keys: [keys.cookieKey],\n}));\napp.use(passport.initialize());\napp.use(passport.session());\n\nmongoose.Promise = global.Promise;\nmongoose.connect(mongoUrl);\n\nauthRoutes(app);\nmacroRoutes(app);\n\nif (NODE_ENV === 'production') {\n  // Express serves up production build assets\n  app.use(express.static('client/build'));\n\n  // This below informs Express to serve up\n  // the index.html file if it doesn't recognize\n  // the provided routes\n  app.get('*', (request, response) => {\n    response.sendFile(path.resolve(__dirname, 'client', 'build', 'index.html'));\n  });\n}\n\napp.listen((PORT || 5000), () => {\n  console.log('They came for us....out of the darkness..'); // eslint-disable-line\n});\n"]}